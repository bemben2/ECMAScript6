<!DOCTYPE html>
<html>

<head>
    <title>ES6 function and objects - loading data with fech</title>
    <script type="text/javascript">
        window.onload = function () {

            // fetch('http://api.open-notify.org/astros.json')
            // .then(res => res.json())
            // .then(console.log);

            const getPeopleInSpace = () =>
                fetch('http://api.open-notify.org/astros.json')
                .then(res => res.json());

            const spaceNames = () =>
                getPeopleInSpace()
                .then(json => json.people)
                .then(people => people.map(p => p.name))
                .then(names => names.join(', '));

            spaceNames().then(console.log);

            // const spacePeople = () => {
            //     return new Promise((resolve, reject) => {
            //         const api = 'http://api.open-notify.org/astros.json';
            //         const request = new XMLHttpRequest();
            //         request.open('GET', api);
            //         request.onload = () => {
            //             if(request.status ===200) {
            //                 resolve(JSON.parse(request.response));
            //             } else {
            //                 reject(new Error(request.statusText));
            //             }
            //         };
            //         request.onerror = err => reject(err);
            //         request.send();
            //     });
            // };
            // spacePeople().then(
            //     spaceData => console.log(spaceData),
            //     err => console.error(new Error('Cannot load space people')));

        }
    </script>

</head>

</html>